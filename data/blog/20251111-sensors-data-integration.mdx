---
title: 'ç¥ç­–æ•°æ®åˆ†æå¼€å‘æ¥å…¥æ–‡æ¡£'
date: '2025-11-11 15:55:00'
tags: ['Java', 'ç¥ç­–æ•°æ®', 'å¼€å‘å·¥å…·', 'æŠ€æœ¯åˆ†äº«']
draft: false
summary: 'åŸºäº SensorsConfig.java é…ç½®ç±»ï¼Œè¯¦ç»†è¯´æ˜å¦‚ä½•åœ¨é¡¹ç›®ä¸­é›†æˆç¥ç­–æ•°æ®åˆ†æåŠŸèƒ½ï¼ŒåŒ…æ‹¬é…ç½®è¯´æ˜ã€ä»£ç é›†æˆå’Œä½¿ç”¨ç¤ºä¾‹ã€‚'
---

<div className="not-prose">
  <div className="mb-8 rounded-lg bg-gradient-to-r from-blue-500 to-purple-600 p-8 text-white shadow-lg">
    <h1 className="mb-4 text-4xl font-bold">ğŸ¯ ç¥ç­–æ•°æ®åˆ†æå¼€å‘æ¥å…¥æ–‡æ¡£</h1>
    <p className="text-xl opacity-90">
      å¿«é€Ÿé›†æˆç¥ç­–æ•°æ®åˆ†æï¼Œå®ç°ç²¾å‡†çš„ç”¨æˆ·è¡Œä¸ºè¿½è¸ª
    </p>
  </div>
</div>

## ğŸ“– æ¦‚è¿°

ç¥ç­–æ•°æ®åˆ†æï¼ˆSensors Analyticsï¼‰æ˜¯ä¸€æ¬¾ä¸“ä¸šçš„ç”¨æˆ·è¡Œä¸ºåˆ†æäº§å“ã€‚æœ¬æ–‡æ¡£åŸºäº `SensorsConfig.java` é…ç½®ç±»ï¼Œè¯¦ç»†è¯´æ˜å¦‚ä½•åœ¨é¡¹ç›®ä¸­é›†æˆç¥ç­–æ•°æ®åˆ†æåŠŸèƒ½ã€‚

### âœ¨ åŠŸèƒ½ç‰¹æ€§

<div className="my-6 grid grid-cols-1 gap-4 md:grid-cols-2">
  <div className="rounded-lg border border-blue-200 bg-blue-50 p-4 dark:border-blue-800 dark:bg-blue-900/20">
    <div className="mb-2 font-semibold text-blue-900 dark:text-blue-300">
      ğŸ”„ å¤šç§ä¸ŠæŠ¥æ¨¡å¼
    </div>
    <div className="text-sm text-blue-700 dark:text-blue-400">
      æ”¯æŒ DEBUGã€BATCH ç­‰å¤šç§æ•°æ®ä¸ŠæŠ¥æ¨¡å¼
    </div>
  </div>
  <div className="rounded-lg border border-green-200 bg-green-50 p-4 dark:border-green-800 dark:bg-green-900/20">
    <div className="mb-2 font-semibold text-green-900 dark:text-green-300">
      âš™ï¸ è‡ªåŠ¨é…ç½®
    </div>
    <div className="text-sm text-green-700 dark:text-green-400">
      è‡ªåŠ¨é…ç½®ç¥ç­– SDK å®¢æˆ·ç«¯ï¼Œå¼€ç®±å³ç”¨
    </div>
  </div>
  <div className="rounded-lg border border-purple-200 bg-purple-50 p-4 dark:border-purple-800 dark:bg-purple-900/20">
    <div className="mb-2 font-semibold text-purple-900 dark:text-purple-300">
      ğŸ”¥ é…ç½®çƒ­æ›´æ–°
    </div>
    <div className="text-sm text-purple-700 dark:text-purple-400">
      æ”¯æŒ @RefreshScope é…ç½®çƒ­æ›´æ–°
    </div>
  </div>
  <div className="rounded-lg border border-orange-200 bg-orange-50 p-4 dark:border-orange-800 dark:bg-orange-900/20">
    <div className="mb-2 font-semibold text-orange-900 dark:text-orange-300">
      ğŸ“Š å®Œæ•´åŸ‹ç‚¹ API
    </div>
    <div className="text-sm text-orange-700 dark:text-orange-400">
      æä¾›å®Œæ•´çš„åŸ‹ç‚¹ API æ¥å£
    </div>
  </div>
</div>

### ğŸ—ï¸ æŠ€æœ¯æ¶æ„

<div className="my-6 rounded-lg border border-gray-200 bg-gray-50 p-6 dark:border-gray-700 dark:bg-gray-800">
  <pre className="text-center text-sm">
    <code>
      åº”ç”¨å±‚ â†’ ISensorsAnalytics â†’ Consumer â†’ ç¥ç­–æœåŠ¡å™¨ (åŸ‹ç‚¹æ¥å£) (æ•°æ®æ¶ˆè´¹è€…)
      (æ•°æ®æ”¶é›†)
    </code>
  </pre>
</div>

---

## ğŸ“¦ ä¾èµ–é…ç½®

### Maven ä¾èµ–

åœ¨é¡¹ç›®çš„ `pom.xml` ä¸­æ·»åŠ ç¥ç­– SDK ä¾èµ–ï¼š

```xml
<!-- å¼•å…¥ç¥ç­–åˆ†æ SDK -->
<dependency>
    <groupId>com.sensorsdata.analytics.javasdk</groupId>
    <artifactId>SensorsAnalyticsSDK</artifactId>
    <version>3.6.8</version>
</dependency>
```

### ğŸ“‹ ç‰ˆæœ¬å…¼å®¹æ€§

<div className="my-6 overflow-x-auto">
  <table className="min-w-full border-collapse">
    <thead>
      <tr className="bg-gray-100 dark:bg-gray-800">
        <th className="border border-gray-300 px-4 py-2 text-left dark:border-gray-600">
          ç»„ä»¶
        </th>
        <th className="border border-gray-300 px-4 py-2 text-left dark:border-gray-600">
          ç‰ˆæœ¬è¦æ±‚
        </th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          JDK ç‰ˆæœ¬
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          <code>1.8+</code>
        </td>
      </tr>
      <tr>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          Spring Boot ç‰ˆæœ¬
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          <code>2.x+</code>
        </td>
      </tr>
      <tr>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          ç¥ç­– SDK ç‰ˆæœ¬
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          <code>3.6.8</code>
        </td>
      </tr>
    </tbody>
  </table>
</div>

---

## âš™ï¸ é…ç½®è¯´æ˜

### é…ç½®å±æ€§ç±»

é¡¹ç›®ä¸­ä½¿ç”¨ `SensorsDataProperties` ç±»æ¥ç®¡ç†ç¥ç­–ç›¸å…³é…ç½®ï¼š

```java
@RefreshScope
@Data
@Component
@ConfigurationProperties(prefix = "sensorsdata")
public class SensorsDataProperties {

    /**
     * ç¥ç­–æœåŠ¡åœ°å€
     */
    private String serverUrl;

    /**
     * åŸ‹ç‚¹æ¨¡å¼
     */
    private String trackMode;

    /**
     * ç¥ç­–äº‹ä»¶åç§°
     */
    private String eventName;

    /**
     * æ‰¹é‡å‘é€é…ç½®
     */
    private BatchMode batch;

    @Data
    public static class BatchMode {
        /**
         * å¿«é€Ÿæ‰¹é‡å‘é€æ¨¡å¼"æ¯æ¬¡å‘é€"æ¡æ•°é˜ˆå€¼
         */
        private Integer bulkSize;

        /**
         * ç¼“å­˜é˜Ÿåˆ—æœ€å¤§æ¡æ•°
         */
        private Integer maxCacheSize;

        /**
         * è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
         */
        private Integer timeoutSeconds;
    }
}
```

### è·Ÿè¸ªæ¨¡å¼æšä¸¾

æ”¯æŒçš„è·Ÿè¸ªæ¨¡å¼å®šä¹‰åœ¨ `SensorsTrackModeEnums` ä¸­ï¼š

```java
public enum SensorsTrackModeEnums implements EnumLookUp<String> {
    DEBUG("debug", "æµ‹è¯•ä¸ŠæŠ¥"),
    BATCH("batch", "æ‰¹é‡æ¨¡å¼"),
    FAST_BATCH("fast_batch", "å¿«é€Ÿæ‰¹é‡æ¨¡å¼");
}
```

### ğŸ“ é…ç½®å‚æ•°è¯¦è§£

<div className="my-6 overflow-x-auto">
  <table className="min-w-full border-collapse text-sm">
    <thead>
      <tr className="bg-blue-100 dark:bg-blue-900/30">
        <th className="border border-gray-300 px-4 py-2 text-left dark:border-gray-600">
          å‚æ•°
        </th>
        <th className="border border-gray-300 px-4 py-2 text-left dark:border-gray-600">
          ç±»å‹
        </th>
        <th className="border border-gray-300 px-4 py-2 text-left dark:border-gray-600">
          å¿…å¡«
        </th>
        <th className="border border-gray-300 px-4 py-2 text-left dark:border-gray-600">
          è¯´æ˜
        </th>
        <th className="border border-gray-300 px-4 py-2 text-left dark:border-gray-600">
          ç¤ºä¾‹
        </th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          <code>serverUrl</code>
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          String
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          âœ… æ˜¯
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          ç¥ç­–æœåŠ¡å™¨åœ°å€
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          <code>https://api.example.com/sa?project=stage</code>
        </td>
      </tr>
      <tr>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          <code>trackMode</code>
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          String
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          âœ… æ˜¯
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          åŸ‹ç‚¹æ¨¡å¼
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          <code>batch</code>ã€<code>debug</code>
        </td>
      </tr>
      <tr>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          <code>eventName</code>
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          String
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          âŒ å¦
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          é»˜è®¤äº‹ä»¶åç§°
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          <code>d_h5_trilateral_credit_claim_click</code>
        </td>
      </tr>
      <tr>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          <code>batch.bulkSize</code>
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          Integer
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          âŒ å¦
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          æ‰¹é‡å‘é€æ¡æ•°é˜ˆå€¼
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          <code>100</code>
        </td>
      </tr>
      <tr>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          <code>batch.maxCacheSize</code>
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          Integer
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          âŒ å¦
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          ç¼“å­˜é˜Ÿåˆ—æœ€å¤§æ¡æ•°
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          <code>10000</code>
        </td>
      </tr>
      <tr>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          <code>batch.timeoutSeconds</code>
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          Integer
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          âŒ å¦
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          <code>30</code>
        </td>
      </tr>
    </tbody>
  </table>
</div>

---

## ğŸ”§ ä»£ç é›†æˆ

### é…ç½®ç±»

å°† `SensorsConfig.java` æ·»åŠ åˆ°é¡¹ç›®ä¸­ï¼š

```java
/**
 * @author å¼€å‘è€…
 * @date 2025/11/11 15:55:00
 */
@Slf4j
@Configuration
public class SensorsConfig {

    @Resource
    private SensorsDataProperties sensorsDataProperties;

    @Bean(destroyMethod = "shutdown")
    public ISensorsAnalytics init() {

        SensorsTrackModeEnums trackModeEnums =
            EnumLookUp.getEnumInstance(SensorsTrackModeEnums.class, sensorsDataProperties.getTrackMode());

        switch (trackModeEnums) {
            case DEBUG:
                // æ³¨æ„ï¼šdebug æ¨¡å¼æ•°æ®ä¸ä¼šå†™å…¥æœåŠ¡å™¨
                // URL ä¼šä» https://api.example.com/sa?project=stage
                // å˜ä¸º https://api.example.com/debug?project=default
                log.info("sensorsData debug mode");
                return new SensorsAnalytics(new DebugConsumer(sensorsDataProperties.getServerUrl(), true));

            case BATCH:
                log.info("sensorsData batch mode");
                return new SensorsAnalytics(new BatchConsumer(sensorsDataProperties.getServerUrl()));
        }

        log.info("sensorsData default mode [batch]");
        return new SensorsAnalytics(new BatchConsumer(sensorsDataProperties.getServerUrl()));
    }
}
```

<div className="my-6 border-l-4 border-blue-500 bg-blue-50 p-4 dark:bg-blue-900/20">
  <div className="flex items-start">
    <span className="mr-3 text-2xl">ğŸ’¡</span>
    <div>
      <div className="mb-1 font-semibold text-blue-900 dark:text-blue-300">
        æç¤º
      </div>
      <div className="text-sm text-blue-800 dark:text-blue-400">
        ç¡®ä¿ <code>SensorsDataProperties</code> å’Œ{' '}
        <code>SensorsTrackModeEnums</code> åœ¨é¡¹ç›®çš„ classpath ä¸­ã€‚
      </div>
    </div>
  </div>
</div>

---

## ğŸ’» ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬åŸ‹ç‚¹

```java
@Service
public class UserBehaviorService {

    @Resource
    private ISensorsAnalytics sensorsAnalytics;

    @Resource
    private SensorsDataProperties sensorsDataProperties;

    /**
     * ç”¨æˆ·ç‚¹å‡»äº‹ä»¶åŸ‹ç‚¹
     */
    public void trackUserClick(String userId, String creditApplyNo, String scene) {
        Map<String, Object> properties = new HashMap<>();
        properties.put("f_credit_apply_no", creditApplyNo);
        properties.put("f_quotient_scene", scene);
        properties.put("timestamp", System.currentTimeMillis());

        // å‘é€åŸ‹ç‚¹æ•°æ®
        sensorsAnalytics.track(userId, false, sensorsDataProperties.getEventName(), properties);

        // ç«‹å³åˆ·æ–°ï¼ˆå¯é€‰ï¼‰
        sensorsAnalytics.flush();
    }
}
```

### ä¸šåŠ¡åœºæ™¯ç¤ºä¾‹

```java
@Service
public class CreditApplyService {

    @Resource
    private ISensorsAnalytics sensorsAnalytics;

    @Resource
    private SensorsDataProperties sensorsDataProperties;

    /**
     * æˆä¿¡ç”³è¯·æˆåŠŸåŸ‹ç‚¹
     */
    public void trackCreditApplySuccess(CreditApply creditApply, Partner partner) {
        Map<String, Object> properties = new HashMap<>();
        properties.put("f_credit_apply_no", creditApply.getSeqNo());
        properties.put("f_quotient_scene", partner.getPartnerCode());
        properties.put("f_credit_amount", creditApply.getCreditAmount());
        properties.put("f_apply_time", creditApply.getCreateTime());

        // ä½¿ç”¨éšæœº UUID ä½œä¸ºåŒ¿åç”¨æˆ·æ ‡è¯†
        String distinctId = UUID.randomUUID().toString();

        sensorsAnalytics.track(distinctId, false, sensorsDataProperties.getEventName(), properties);
        sensorsAnalytics.flush();
    }
}
```

### æµ‹è¯•ä»£ç 

```java
@Test
public void testSensorsAnalytics() {
    Map<String, Object> properties = new HashMap<>();
    properties.put("f_credit_apply_no", "CA20251111000001");
    properties.put("f_quotient_scene", "miniWallet");
    properties.put("f_event_type", "click");

    sensorsAnalytics.track(
        UUID.randomUUID().toString(),
        false,
        "d_h5_trilateral_credit_claim_click",
        properties
    );

    sensorsAnalytics.flush();
}
```

---

## ğŸ” é…ç½®ç¤ºä¾‹

<div className="my-8 grid grid-cols-1 gap-6 lg:grid-cols-3">
  <div className="rounded-lg border border-green-200 bg-green-50 p-5 dark:border-green-800 dark:bg-green-900/20">
    <div className="mb-3 text-lg font-semibold text-green-900 dark:text-green-300">
      ğŸ› ï¸ å¼€å‘ç¯å¢ƒ
    </div>
    <div className="text-xs text-green-700 dark:text-green-400">
      ä½¿ç”¨ DEBUG æ¨¡å¼è¿›è¡Œè°ƒè¯•
    </div>
  </div>
  <div className="rounded-lg border border-blue-200 bg-blue-50 p-5 dark:border-blue-800 dark:bg-blue-900/20">
    <div className="mb-3 text-lg font-semibold text-blue-900 dark:text-blue-300">
      ğŸ§ª æµ‹è¯•ç¯å¢ƒ
    </div>
    <div className="text-xs text-blue-700 dark:text-blue-400">
      ä½¿ç”¨ BATCH æ¨¡å¼è¿›è¡Œæµ‹è¯•
    </div>
  </div>
  <div className="rounded-lg border border-red-200 bg-red-50 p-5 dark:border-red-800 dark:bg-red-900/20">
    <div className="mb-3 text-lg font-semibold text-red-900 dark:text-red-300">
      ğŸš€ ç”Ÿäº§ç¯å¢ƒ
    </div>
    <div className="text-xs text-red-700 dark:text-red-400">
      ä½¿ç”¨ BATCH æ¨¡å¼ï¼Œä¼˜åŒ–æ€§èƒ½
    </div>
  </div>
</div>

### å¼€å‘ç¯å¢ƒé…ç½®

```yaml
# application-dev.yml
sensorsdata:
  server-url: https://api.example.com/sa?project=dev
  track-mode: debug
  event-name: d_h5_trilateral_credit_claim_click
  batch:
    bulk-size: 50
    max-cache-size: 5000
    timeout-seconds: 10
```

### æµ‹è¯•ç¯å¢ƒé…ç½®

```yaml
# application-test.yml
sensorsdata:
  server-url: https://api.example.com/sa?project=stage
  track-mode: batch
  event-name: d_h5_trilateral_credit_claim_click
  batch:
    bulk-size: 100
    max-cache-size: 10000
    timeout-seconds: 30
```

### ç”Ÿäº§ç¯å¢ƒé…ç½®

```yaml
# application-prod.yml
sensorsdata:
  server-url: https://api.example.com/sa?project=production
  track-mode: batch
  event-name: d_h5_trilateral_credit_claim_click
  batch:
    bulk-size: 200
    max-cache-size: 20000
    timeout-seconds: 60
```

### Nacos é…ç½®ä¸­å¿ƒ

å¦‚æœä½¿ç”¨ Nacos é…ç½®ä¸­å¿ƒï¼Œå¯ä»¥åœ¨å¯¹åº”çš„ `dataId` ä¸­æ·»åŠ ï¼š

```yaml
# example-backend.yml
sensorsdata:
  server-url: ${sensors.server.url:https://api.example.com/sa?project=stage}
  track-mode: ${sensors.track.mode:batch}
  event-name: ${sensors.event.name:d_h5_trilateral_credit_claim_click}
  batch:
    bulk-size: ${sensors.batch.bulk-size:100}
    max-cache-size: ${sensors.batch.max-cache-size:10000}
    timeout-seconds: ${sensors.batch.timeout-seconds:30}
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### é‡è¦æé†’

<div className="space-y-4 my-6">
  <div className="bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 p-4">
    <div className="flex items-start">
      <span className="text-2xl mr-3">ğŸš¨</span>
      <div>
        <div className="font-semibold text-red-900 dark:text-red-300 mb-2">DEBUG æ¨¡å¼é™åˆ¶</div>
        <ul className="text-sm text-red-800 dark:text-red-400 space-y-1 list-disc list-inside">
          <li><strong>åˆ‡å‹¿åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ DEBUG æ¨¡å¼</strong></li>
          <li>DEBUG æ¨¡å¼çš„æ•°æ®ä¸ä¼šå†™å…¥æœåŠ¡å™¨</li>
          <li>ä¼šè‡ªåŠ¨ä¿®æ”¹ server URL æ ¼å¼</li>
        </ul>
      </div>
    </div>
  </div>

{' '}
<div className="border-l-4 border-yellow-500 bg-yellow-50 p-4 dark:bg-yellow-900/20">
  <div className="flex items-start">
    <span className="mr-3 text-2xl">âš¡</span>
    <div>
      <div className="mb-2 font-semibold text-yellow-900 dark:text-yellow-300">
        URL æ ¼å¼å˜åŒ–
      </div>
      <div className="space-y-1 text-sm text-yellow-800 dark:text-yellow-400">
        <div>
          æ­£å¸¸æ¨¡å¼ï¼š<code>https://api.example.com/sa?project=stage</code>
        </div>
        <div>
          DEBUGæ¨¡å¼ï¼š<code>https://api.example.com/debug?project=default</code>
        </div>
      </div>
    </div>
  </div>
</div>

  <div className="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 p-4">
    <div className="flex items-start">
      <span className="text-2xl mr-3">ğŸ”’</span>
      <div>
        <div className="font-semibold text-blue-900 dark:text-blue-300 mb-2">é¡¹ç›®ç¯å¢ƒé™åˆ¶</div>
        <ul className="text-sm text-blue-800 dark:text-blue-400 space-y-1 list-disc list-inside">
          <li>éƒ¨åˆ†ç¯å¢ƒå¯èƒ½ä¸æ”¯æŒ debug æ¨¡å¼çš„ project name</li>
          <li>å»ºè®®åœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨ç‹¬ç«‹çš„æµ‹è¯•é¡¹ç›®</li>
        </ul>
      </div>
    </div>
  </div>
</div>

### ğŸš€ æ€§èƒ½ä¼˜åŒ–

<div className="my-6 grid grid-cols-1 gap-4 md:grid-cols-3">
  <div className="rounded-lg border border-gray-200 p-4 dark:border-gray-700">
    <div className="mb-2 font-semibold">ğŸ“¦ æ‰¹é‡å‘é€</div>
    <ul className="space-y-1 text-sm text-gray-700 dark:text-gray-300">
      <li>
        â€¢ ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ <code>batch</code> æ¨¡å¼
      </li>
      <li>
        â€¢ åˆç†è®¾ç½® <code>bulkSize</code>
      </li>
      <li>
        â€¢ è®¾ç½®åˆé€‚çš„ <code>timeoutSeconds</code>
      </li>
    </ul>
  </div>

  <div className="rounded-lg border border-gray-200 p-4 dark:border-gray-700">
    <div className="mb-2 font-semibold">âš¡ å¼‚æ­¥å¤„ç†</div>
    <ul className="space-y-1 text-sm text-gray-700 dark:text-gray-300">
      <li>â€¢ åŸ‹ç‚¹æ“ä½œå»ºè®®å¼‚æ­¥æ‰§è¡Œ</li>
      <li>â€¢ é¿å…å½±å“ä¸»ä¸šåŠ¡æµç¨‹</li>
      <li>â€¢ ä½¿ç”¨çº¿ç¨‹æ± ç®¡ç†</li>
    </ul>
  </div>

  <div className="rounded-lg border border-gray-200 p-4 dark:border-gray-700">
    <div className="mb-2 font-semibold">ğŸ›¡ï¸ å¼‚å¸¸å¤„ç†</div>
    <ul className="space-y-1 text-sm text-gray-700 dark:text-gray-300">
      <li>â€¢ æ•è·æ‰€æœ‰å¼‚å¸¸</li>
      <li>â€¢ è®°å½•é”™è¯¯æ—¥å¿—</li>
      <li>â€¢ ä¸å½±å“ä¸»ä¸šåŠ¡</li>
    </ul>
  </div>
</div>

**å¼‚å¸¸å¤„ç†ç¤ºä¾‹ï¼š**

```java
try {
    sensorsAnalytics.track(distinctId, isLoginId, eventName, properties);
    sensorsAnalytics.flush();
} catch (Exception e) {
    log.error("ç¥ç­–åŸ‹ç‚¹å¤±è´¥", e);
    // ä¸å½±å“ä¸»ä¸šåŠ¡æµç¨‹
}
```

### ğŸ“Š æ•°æ®è§„èŒƒ

<div className="my-6 rounded-lg border border-purple-200 bg-purple-50 p-5 dark:border-purple-800 dark:bg-purple-900/20">
  <div className="mb-3 font-semibold text-purple-900 dark:text-purple-300">
    å­—æ®µå‘½åè§„èŒƒ
  </div>
  <ul className="space-y-2 text-sm text-purple-800 dark:text-purple-400">
    <li>
      âœ“ ä½¿ç”¨ <code>f_</code> å‰ç¼€è¡¨ç¤ºä¸šåŠ¡å­—æ®µ
    </li>
    <li>âœ“ é‡‡ç”¨ä¸‹åˆ’çº¿å‘½åæ³•</li>
    <li>
      âœ“ ç¤ºä¾‹ï¼š<code>f_credit_apply_no</code>ã€<code>f_quotient_scene</code>
    </li>
  </ul>
</div>

<div className="my-6 overflow-x-auto">
  <table className="min-w-full border-collapse text-sm">
    <thead>
      <tr className="bg-purple-100 dark:bg-purple-900/30">
        <th className="border border-gray-300 px-4 py-2 text-left dark:border-gray-600">
          ç±»å‹
        </th>
        <th className="border border-gray-300 px-4 py-2 text-left dark:border-gray-600">
          è¯´æ˜
        </th>
        <th className="border border-gray-300 px-4 py-2 text-left dark:border-gray-600">
          ç¤ºä¾‹
        </th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          å­—ç¬¦ä¸²
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          ç”¨æˆ·IDã€ä¸šåŠ¡ç¼–å·ç­‰
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          <code>"CA20251111000001"</code>
        </td>
      </tr>
      <tr>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          æ•°å€¼
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          é‡‘é¢ã€æ•°é‡ç­‰
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          <code>10000</code>
        </td>
      </tr>
      <tr>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          æ—¶é—´æˆ³
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          ä½¿ç”¨æ¯«ç§’çº§æ—¶é—´æˆ³
        </td>
        <td className="border border-gray-300 px-4 py-2 dark:border-gray-600">
          <code>1699689600000</code>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<div className="my-6 rounded-lg border border-green-200 bg-green-50 p-5 dark:border-green-800 dark:bg-green-900/20">
  <div className="mb-3 font-semibold text-green-900 dark:text-green-300">
    å¿…å¡«å­—æ®µ
  </div>
  <div className="grid grid-cols-1 gap-3 text-sm md:grid-cols-3">
    <div className="flex items-center">
      <span className="mr-2 text-green-600 dark:text-green-400">âœ“</span>
      <code>distinctId</code> - ç”¨æˆ·å”¯ä¸€æ ‡è¯†
    </div>
    <div className="flex items-center">
      <span className="mr-2 text-green-600 dark:text-green-400">âœ“</span>
      <code>eventName</code> - äº‹ä»¶åç§°
    </div>
    <div className="flex items-center">
      <span className="mr-2 text-green-600 dark:text-green-400">âœ“</span>
      <code>properties</code> - äº‹ä»¶å±æ€§
    </div>
  </div>
</div>

---

## ğŸ” é—®é¢˜æ’æŸ¥

### å¸¸è§é—®é¢˜

<div className="space-y-4 my-6">
  <details className="border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-white dark:bg-gray-800">
    <summary className="font-semibold cursor-pointer text-gray-900 dark:text-gray-100">â“ Q1ï¼šé…ç½®ä¸ç”Ÿæ•ˆæ€ä¹ˆåŠï¼Ÿ</summary>
    <div className="mt-3 text-sm text-gray-700 dark:text-gray-300 space-y-2">
      <ul className="list-disc list-inside space-y-1">
        <li>æ£€æŸ¥ <code>@ConfigurationProperties</code> æ³¨è§£æ˜¯å¦æ­£ç¡®</li>
        <li>ç¡®è®¤é…ç½®æ–‡ä»¶è·¯å¾„å’Œæ ¼å¼</li>
        <li>éªŒè¯ Nacos é…ç½®æ˜¯å¦æ­£ç¡®æ¨é€</li>
      </ul>
    </div>
  </details>

{' '}
<details className="rounded-lg border border-gray-200 bg-white p-4 dark:border-gray-700 dark:bg-gray-800">
  <summary className="cursor-pointer font-semibold text-gray-900 dark:text-gray-100">
    â“ Q2ï¼šDEBUG æ¨¡å¼çœ‹ä¸åˆ°æ•°æ®ï¼Ÿ
  </summary>
  <div className="mt-3 space-y-2 text-sm text-gray-700 dark:text-gray-300">
    <ul className="list-inside list-disc space-y-1">
      <li>DEBUG æ¨¡å¼æ•°æ®ä¸ä¼šå†™å…¥æœåŠ¡å™¨</li>
      <li>æ£€æŸ¥æ§åˆ¶å°æ—¥å¿—è¾“å‡º</li>
      <li>ç¡®è®¤ URL æ ¼å¼æ˜¯å¦æ­£ç¡®è½¬æ¢</li>
    </ul>
  </div>
</details>

  <details className="border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-white dark:bg-gray-800">
    <summary className="font-semibold cursor-pointer text-gray-900 dark:text-gray-100">â“ Q3ï¼šæ‰¹é‡æ¨¡å¼æ•°æ®å»¶è¿Ÿï¼Ÿ</summary>
    <div className="mt-3 text-sm text-gray-700 dark:text-gray-300 space-y-2">
      <ul className="list-disc list-inside space-y-1">
        <li>æ£€æŸ¥ <code>timeoutSeconds</code> é…ç½®</li>
        <li>æ‰‹åŠ¨è°ƒç”¨ <code>flush()</code> ç«‹å³å‘é€</li>
        <li>è°ƒæ•´ <code>bulkSize</code> å‚æ•°</li>
      </ul>
    </div>
  </details>
</div>

### ğŸ“ æ—¥å¿—è°ƒè¯•

å¼€å¯ç¥ç­– SDK æ—¥å¿—ï¼š

```yaml
logging:
  level:
    com.sensorsdata: DEBUG
    com.example.backend.config.SensorsConfig: DEBUG
```

### ğŸ¥ å¥åº·æ£€æŸ¥

```java
@Component
public class SensorsHealthCheck {

    @Resource
    private ISensorsAnalytics sensorsAnalytics;

    @PostConstruct
    public void checkSensorsStatus() {
        try {
            // å‘é€æµ‹è¯•äº‹ä»¶
            Map<String, Object> testProps = new HashMap<>();
            testProps.put("test", "health_check");

            sensorsAnalytics.track("health_check", false, "system_health_check", testProps);
            log.info("ç¥ç­–æ•°æ®åˆ†æåˆå§‹åŒ–æˆåŠŸ");
        } catch (Exception e) {
            log.error("ç¥ç­–æ•°æ®åˆ†æåˆå§‹åŒ–å¤±è´¥", e);
        }
    }
}
```

---

## ğŸ¯ æœ€ä½³å®è·µ

### ä»£ç ç»„ç»‡

<div className="my-6 grid grid-cols-1 gap-6 md:grid-cols-2">
  <div className="rounded-lg border border-blue-200 bg-blue-50 p-5 dark:border-blue-800 dark:bg-blue-900/20">
    <div className="mb-3 font-semibold text-blue-900 dark:text-blue-300">
      ğŸ“¦ ç»Ÿä¸€åŸ‹ç‚¹æœåŠ¡
    </div>
    <div className="text-sm text-blue-800 dark:text-blue-400">
      åˆ›å»ºç»Ÿä¸€çš„åŸ‹ç‚¹æœåŠ¡ç±»ï¼Œå°è£…é€šç”¨é€»è¾‘ï¼Œä¾¿äºç»´æŠ¤å’Œç®¡ç†ã€‚
    </div>
  </div>

  <div className="rounded-lg border border-green-200 bg-green-50 p-5 dark:border-green-800 dark:bg-green-900/20">
    <div className="mb-3 font-semibold text-green-900 dark:text-green-300">
      ğŸ·ï¸ äº‹ä»¶å¸¸é‡ç®¡ç†
    </div>
    <div className="text-sm text-green-800 dark:text-green-400">
      ä½¿ç”¨å¸¸é‡ç±»ç®¡ç†æ‰€æœ‰äº‹ä»¶åç§°ï¼Œé¿å…ç¡¬ç¼–ç ï¼Œå‡å°‘é”™è¯¯ã€‚
    </div>
  </div>
</div>

**ç»Ÿä¸€åŸ‹ç‚¹æœåŠ¡ï¼š**

```java
@Service
public class SensorsTrackingService {

    @Resource
    private ISensorsAnalytics sensorsAnalytics;

    public void trackEvent(String userId, String eventName, Map<String, Object> properties) {
        // ç»Ÿä¸€çš„åŸ‹ç‚¹é€»è¾‘
    }
}
```

**äº‹ä»¶å¸¸é‡ç®¡ç†ï¼š**

```java
public class SensorsEventConstants {
    public static final String CREDIT_APPLY_CLICK = "d_h5_trilateral_credit_claim_click";
    public static final String USER_REGISTER = "d_user_register";
    public static final String ORDER_CREATE = "d_order_create";
}
```

### ğŸ“Š ç›‘æ§å‘Šè­¦

<div className="my-6 rounded-lg border border-orange-200 bg-orange-50 p-5 dark:border-orange-800 dark:bg-orange-900/20">
  <div className="mb-3 font-semibold text-orange-900 dark:text-orange-300">
    ç›‘æ§æŒ‡æ ‡
  </div>
  <ul className="space-y-2 text-sm text-orange-800 dark:text-orange-400">
    <li>ğŸ“ˆ åŸ‹ç‚¹æˆåŠŸç‡ç›‘æ§</li>
    <li>â±ï¸ æ•°æ®å‘é€å»¶è¿Ÿç›‘æ§</li>
    <li>ğŸš¨ å¼‚å¸¸æƒ…å†µå‘Šè­¦</li>
  </ul>
</div>

### ğŸ—‚ï¸ æ•°æ®æ²»ç†

<div className="my-6 grid grid-cols-1 gap-4 md:grid-cols-3">
  <div className="rounded-lg border border-gray-200 p-4 text-center dark:border-gray-700">
    <div className="mb-2 text-3xl">ğŸ§¹</div>
    <div className="mb-1 font-semibold">å®šæœŸæ¸…ç†</div>
    <div className="text-xs text-gray-600 dark:text-gray-400">
      å®šæœŸæ¸…ç†æµ‹è¯•æ•°æ®
    </div>
  </div>
  <div className="rounded-lg border border-gray-200 p-4 text-center dark:border-gray-700">
    <div className="mb-2 text-3xl">ğŸ“š</div>
    <div className="mb-1 font-semibold">æ•°æ®å­—å…¸</div>
    <div className="text-xs text-gray-600 dark:text-gray-400">
      å»ºç«‹å®Œæ•´çš„æ•°æ®å­—å…¸
    </div>
  </div>
  <div className="rounded-lg border border-gray-200 p-4 text-center dark:border-gray-700">
    <div className="mb-2 text-3xl">ğŸ“‹</div>
    <div className="mb-1 font-semibold">è§„èŒƒæ–‡æ¡£</div>
    <div className="text-xs text-gray-600 dark:text-gray-400">
      åˆ¶å®šåŸ‹ç‚¹è§„èŒƒæ–‡æ¡£
    </div>
  </div>
</div>

---

## ğŸ“š é™„å½•

### ç›¸å…³æ–‡ä»¶æ¸…å•

<div className="my-6 rounded-lg border border-gray-200 bg-gray-50 p-5 dark:border-gray-700 dark:bg-gray-800">
  <ul className="space-y-2 text-sm">
    <li className="flex items-center">
      <span className="mr-2 text-blue-500">ğŸ“„</span>
      <code>SensorsConfig.java</code> - ç¥ç­–é…ç½®ç±»
    </li>
    <li className="flex items-center">
      <span className="mr-2 text-green-500">ğŸ“„</span>
      <code>SensorsDataProperties.java</code> - é…ç½®å±æ€§ç±»
    </li>
    <li className="flex items-center">
      <span className="mr-2 text-purple-500">ğŸ“„</span>
      <code>SensorsTrackModeEnums.java</code> - è·Ÿè¸ªæ¨¡å¼æšä¸¾
    </li>
  </ul>
</div>

### å‚è€ƒé“¾æ¥

<div className="my-6 grid grid-cols-1 gap-4 md:grid-cols-2">
  <a
    href="https://manual.sensorsdata.cn/"
    target="_blank"
    rel="noopener noreferrer"
    className="block rounded-lg border border-blue-200 bg-blue-50 p-4 transition-shadow hover:shadow-lg dark:border-blue-800 dark:bg-blue-900/20"
  >
    <div className="mb-2 font-semibold text-blue-900 dark:text-blue-300">
      ğŸ“– ç¥ç­–æ•°æ®å®˜æ–¹æ–‡æ¡£
    </div>
    <div className="text-xs text-blue-700 dark:text-blue-400">
      æŸ¥çœ‹å®Œæ•´çš„äº§å“æ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—
    </div>
  </a>

  <a
    href="https://manual.sensorsdata.cn/sa/latest/java-sdk-7538402.html"
    target="_blank"
    rel="noopener noreferrer"
    className="block rounded-lg border border-green-200 bg-green-50 p-4 transition-shadow hover:shadow-lg dark:border-green-800 dark:bg-green-900/20"
  >
    <div className="mb-2 font-semibold text-green-900 dark:text-green-300">
      ğŸ’» Java SDK ä½¿ç”¨æŒ‡å—
    </div>
    <div className="text-xs text-green-700 dark:text-green-400">
      æ·±å…¥äº†è§£ Java SDK çš„è¯¦ç»†ç”¨æ³•
    </div>
  </a>
</div>

---

<div className="not-prose mt-12">
  <div className="rounded-lg bg-gradient-to-r from-purple-500 to-pink-600 p-6 text-center text-white shadow-lg">
    <div className="mb-2 text-2xl font-bold">ğŸ‰ æ­å–œï¼</div>
    <div className="text-lg">æ‚¨å·²å®Œæˆç¥ç­–æ•°æ®åˆ†æçš„é›†æˆå­¦ä¹ </div>
    <div className="mt-3 text-sm opacity-90">
      å¼€å§‹ä½¿ç”¨ç¥ç­–æ•°æ®åˆ†æï¼Œæ·±å…¥äº†è§£ç”¨æˆ·è¡Œä¸ºå§ï¼
    </div>
  </div>
</div>
